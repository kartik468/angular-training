<!DOCTYPE html>
<html>

<head>
    <title>form validation</title>
</head>

<body ng-app='formExample'>
    <style type="text/css">
    .ng-invalid.ng-dirty {
        border-color: #FA787E;
    }
    
    .ng-valid.ng-dirty {
        border-color: #78FA89;
    }
    </style>
    <div ng-controller="ExampleController">
        <form novalidate class="simple-form" name="reviewForm" novalidate>
            <div>YOUR INSTITUTION IS:
                <select ng-init="selectedName=institutionNames[0]" ng-model="selectedName" ng-options="x for x in institutionNames"></select>
            </div>
            <br />
            <div>*Username:
                <input type="email" ng-model="email" placeholder="Email (this will become your username)" ng-change="{{validateEmailForEquality()}}" required />
                <span>{{email}}</span>
            </div>
            <br />
            <div>*Confirm Email:
                <input type="email" class="re-enter-email-input" ng-model="confirmEmail" placeholder="Confirm Email" required />
                <span>{{confirmEmail}}</span>
            </div>
            <br />
            <div>*Password:
                <input type="password" ng-model="password" placeholder="Password" required />
                <span>{{password}}</span>
            </div>
            <br />
            <div>*Re-enter Password:
                <input type="password" class="re-enter-password-input" ng-model="confirmPassword" placeholder="Re-enter Password" ng-change="{{validatePasswordForEquality()}}" required />
                <span>{{confirmPassword}}</span>
            </div>
            <br />
            <div>*First Name:
                <input type="text" ng-model="firstName" placeholder="First Name" required />
                <span>{{firstName}}</span>
            </div>
            <br />
            <div>Last Name:
                <input type="password" ng-model="lastName" placeholder="Last Name" />
                <span>{{lastName}}</span>
            </div>
            <br />
            <!-- <input type="button" ng-click="reset()" value="Reset" /> -->
            <input type="submit" ng-click="submitForm(reviewForm.$valid)" value="Save" />
            <div>syntax of form: {{reviewForm.$valid}}</div>
            <div ng-show="formSubmitted">form submitted succssfully</div>
        </form>
        <!-- <pre>user = {{user | json}}</pre>
        <pre>master = {{master | json}}</pre> -->
        <script src="../app/lib/js/angular.js"></script>
        <script>
        var myApp = angular.module('formExample', []);
        myApp.controller('ExampleController', ['$scope', function($scope) {
            $scope.master = {};
            $scope.formSubmitted = false;
            $scope.institutionNames = ['Institution A', 'Institution B', 'Institution C'];
            $scope.email = '';
            $scope.confirmEmail = '';
            $scope.password = '';
            $scope.confirmPassword = '';
            $scope.firstName = '';
            $scope.lastName = '';

            $scope.validateEmailForEquality = function() {
                var inputElement;
                if ($scope.email && $scope.confirmEmail) {
                    inputElement = angular.element(document.getElementsByClassName('re-enter-email-input'));
                    if ($scope.email !== $scope.confirmEmail) {
                        inputElement.removeClass('ng-valid').addClass('ng-invalid');
                    } else {
                        inputElement.addClass('ng-valid').removeClass('ng-invalid');
                    }
                }
            }

            $scope.validatePasswordForEquality = function() {
                var inputElement;
                if ($scope.password && $scope.confirmPassword) {
                    inputElement = angular.element(document.getElementsByClassName('re-enter-password-input'));
                    if ($scope.password !== $scope.confirmPassword) {
                        inputElement.removeClass('ng-valid').addClass('ng-invalid');
                    } else {
                        inputElement.addClass('ng-valid').removeClass('ng-invalid');
                    }
                }
            }

            $scope.submitForm = function(valid) {
                if (valid && $scope.password === $scope.reEnterPassword && $scope.email === $scope.confirmEmail) {
                    $scope.formSubmitted = true;
                    return;
                }
                if ($scope.password !== $scope.reEnterPassword) {
                    console.log('password dose not match');
                }
                if ($scope.email !== $scope.confirmEmail) {
                    console.log('email dose not match');
                }
                alert('invalid form');
            };



            // $scope.reset = function() {
            //     $scope.user = angular.copy($scope.master);
            // };

            // $scope.reset();
        }]);
        </script>
    </div>
</body>

</html>
